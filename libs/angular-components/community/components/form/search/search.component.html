<input
  type="text"
  [(ngModel)]="inputValue"
  class="tedi-search__input"
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
/>

<div class="tedi-search__suffix">
  @if (clearable() && inputValue()) {
    <button
      type="reset"
      tedi-close-button
      [small]="true"
      [smallIcon]="true"
      (click)="clearResult($event)"
    ></button>
    <div class="separator"></div>
  }
  @if (!withButton()) {
    <tedi-icon name="search" color="secondary" [size]="iconSize()" />
  }
</div>

@if (withButton()) {
  <button
    tedi-button
    class="tedi-search__trigger"
    [size]="buttonSize()"
    (click)="searchButtonClick()"
  >
    <tedi-icon name="search" color="white" [size]="buttonText() ? 18 : 24" />
    {{ buttonText() }}
  </button>
}

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOpen()"
  (detach)="isOpen.set(false)"
>
  <tedi-card
    class="tedi-search__panel"
    [style.width.px]="width()"
    [spacing]="'none'"
    cdkMenu
  >
    <tedi-card-content>
      <div class="options">
        @for (option of foundOptions(); track option.value) {
          <button
            class="tedi-search__option"
            tedi-dropdown-item
            cdkMenuItem
            [value]="option.value"
            (cdkMenuItemTriggered)="selectResult(option)"
          >
            {{ option.label }} <small>x {{ option.description }}</small>
          </button>
        } @empty {
          <!-- TODO -->
          <span>Empty message</span>
        }
      </div>
      <div class="tedi-search__separator"></div>
      <div class="tedi-search__footer">
        <ng-content></ng-content>
      </div>
    </tedi-card-content>
  </tedi-card>
</ng-template>
