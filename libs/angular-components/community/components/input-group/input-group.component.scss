@use "@tehik-ee/tedi-core/mixins";
@use "sass:list";

@mixin left-round-corners() {
  @include mixins.responsive-styles(
    border-top-left-radius,
    input-group-rounded
  );
  @include mixins.responsive-styles(
    border-bottom-left-radius,
    input-group-rounded
  );
}

@mixin right-round-corners() {
  @include mixins.responsive-styles(
    border-top-right-radius,
    input-group-rounded
  );
  @include mixins.responsive-styles(
    border-bottom-right-radius,
    input-group-rounded
  );
}

.tedi-input-group__container {
  --input-group-background-color: var(--form-input-background-default);
  --input-group-rounded-desktop: var(--radius-02-default);
  --input-group-rounded-tablet: var(--radius-02-default);
  --input-group-rounded-mobile: var(--radius-02-default);
  --input-group-min-height: var(--dimensions-14);
  --input-group-text-color: var(--general-text-secondary);
  --input-group-border-width: var(--borders-01);
  --input-group-border-color: var(--form-input-border-default);

  --input-group-side-background-color: var(
    --form-general-background-action-background
  );
  --input-group-border: var(--input-group-border-width) solid
    var(--input-group-border-color);

  --input-group-disabled-border-color: var(--neutral-350);
  --input-group-disabled-background-color: var(--neutral-300);
  --input-group-text-disabled-color: var(--neutral-450);

  display: flex;
  justify-content: space-between;

  color: var(--input-group-text-color);
  background: var(--input-group-background-color);
  min-height: var(--input-group-min-height);
  overflow: hidden;

  @include mixins.responsive-styles(font-family, family-primary);

  & > :not(.tedi-input-group__prefix, .tedi-input-group__suffix) {
    margin: 0;
    width: 100%;

    border-radius: var(--input-group-inner-border-radius);
    border-top: var(--input-group-border);
    border-bottom: var(--input-group-border);
  }

  select {
    border: none;
    background-color: transparent;
  }

  &:has(.tedi-input-group__prefix:empty) {
    @include left-round-corners();

    input {
      @include left-round-corners();
    }
  }

  &:has(.tedi-input-group__suffix:empty) {
    @include right-round-corners();

    input {
      @include right-round-corners();
    }
  }
}

.tedi-input-group__container--disabled {
  --input-group-text-color: var(--input-group-text-disabled-color);
  --input-group-border-color: var(--input-group-disabled-border-color);
  --input-group-background-color: var(--input-group-disabled-background-color);
  --input-group-side-background-color: var(
    --input-group-disabled-background-color
  );
}

.tedi-input-group__prefix,
.tedi-input-group__suffix {
  display: flex;
  align-items: center;
  flex-shrink: 0;

  background: var(--input-group-side-background-color);
  border: var(--input-group-border);

  @include mixins.responsive-styles(
    padding-left,
    form-field-padding-x-md-default
  );
  @include mixins.responsive-styles(
    padding-right,
    form-field-padding-x-md-default
  );
  @include mixins.responsive-styles(
    padding-top,
    form-field-padding-y-md-default
  );
  @include mixins.responsive-styles(
    padding-bottom,
    form-field-padding-y-md-default
  );

  > * {
    padding: var(--input-group-side-padding);
  }

  &:empty {
    display: none;
  }
}

.tedi-input-group__prefix {
  border-right: 0;

  @include left-round-corners();
}

.tedi-input-group__suffix {
  border-left: 0;

  @include right-round-corners();
}
