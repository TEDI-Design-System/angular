@use "@tehik-ee/tedi-core/mixins";
@use "sass:list";

@mixin left-round-corners() {
  @include mixins.responsive-styles(
    border-top-left-radius,
    input-group_rounded
  );
  @include mixins.responsive-styles(
    border-bottom-left-radius,
    input-group_rounded
  );
}

@mixin right-round-corners() {
  @include mixins.responsive-styles(
    border-top-right-radius,
    input-group_rounded
  );
  @include mixins.responsive-styles(
    border-bottom-right-radius,
    input-group_rounded
  );
}

.tedi-input-group__container {
  --input-group_rounded-desktop: var(--radius-02-default);
  --input-group_rounded-tablet: var(--radius-02-default);
  --input-group_rounded-mobile: var(--radius-02-default);

  --input-group_padding_x-desktop: var(
    --form-field-padding-x-md-default-desktop
  );
  --input-group_padding_x-tablet: var(--form-field-padding-x-md-default-tablet);
  --input-group_padding_x-mobile: var(--form-field-padding-x-md-default-mobile);
  --input-group_padding_y-desktop: var(
    --form-field-padding-y-md-default-desktop
  );
  --input-group_padding_y-tablet: var(--form-field-padding-y-md-default-tablet);
  --input-group_padding_y-mobile: var(--form-field-padding-y-md-default-mobile);

  --input-group_background_color: var(--form-input-background-default);
  --input-group_min_height: var(--dimensions-14);
  --input-group_text_color: var(--general-text-secondary);
  --input-group_border_width: var(--borders-01);
  --input-group_border_color: var(--form-input-border-default);

  --input-group_side_background_color: var(
    --form-general-background-action-background
  );
  --input-group_border: var(--input-group_border_width) solid
    var(--input-group_border_color);

  --input-group_disabled_border_color: var(--neutral-350);
  --input-group_disabled_background_color: var(--neutral-300);
  --input-group_text_disabled_color: var(--neutral-450);

  display: flex;
  justify-content: space-between;

  color: var(--input-group_text_color);
  background: var(--input-group_background_color);
  min-height: var(--input-group_min_height);
  overflow: hidden;

  @include mixins.responsive-styles(font-family, family-primary);

  & > :not(.tedi-input-group__prefix, .tedi-input-group__suffix) {
    margin: 0;
    width: 100%;

    border-radius: var(--input-group_inner_border_radius);
    border-top: var(--input-group_border);
    border-bottom: var(--input-group_border);
  }

  select {
    border: none;
    background-color: transparent;
  }

  &:has(.tedi-input-group__prefix:empty) {
    @include left-round-corners();

    input {
      @include left-round-corners();
    }
  }

  &:has(.tedi-input-group__suffix:empty) {
    @include right-round-corners();

    input {
      @include right-round-corners();
    }
  }
}

.tedi-input-group__container--disabled {
  --input-group_text_color: var(--input-group_text_disabled_color);
  --input-group_border_color: var(--input-group_disabled_border_color);
  --input-group_background_color: var(--input-group_disabled_background_color);
  --input-group_side_background_color: var(
    --input-group_disabled_background_color
  );
}

.tedi-input-group__prefix,
.tedi-input-group__suffix {
  display: flex;
  align-items: center;
  flex-shrink: 0;

  background: var(--input-group_side_background_color);
  border: var(--input-group_border);

  @include mixins.responsive-styles(padding-left, input-group_padding_x);
  @include mixins.responsive-styles(padding-right, input-group_padding_x);
  @include mixins.responsive-styles(padding-top, input-group_padding_y);
  @include mixins.responsive-styles(padding-bottom, input-group_padding_y);

  &:empty {
    display: none;
  }
}

.tedi-input-group__prefix {
  border-right: 0;

  @include left-round-corners();
}

.tedi-input-group__suffix {
  border-left: 0;

  @include right-round-corners();
}
