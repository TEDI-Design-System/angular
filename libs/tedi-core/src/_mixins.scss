@use 'sass:string';
@use 'sass:map';
@use 'sass:meta';

$breakpoints: (
  xs: 0,
  sm: 576px,
  md: 768px,
  lg: 992px,
  xl: 1200px,
  xxl: 1400px,
);

@function construct-variables($variable-names, $suffix, $calc, $additional-variable: null) {
  $result: '';

  @each $name in $variable-names {
    $base-value: var(--#{$name}-#{$suffix});
    $additional-value: if($additional-variable != null, var(--#{$additional-variable}-#{$suffix}), null);

    // Combine base value and additional variable using calc()
    $combined-value: if($additional-value != null, calc(#{$base-value} + #{$additional-value}), $base-value);

    // Apply additional calc logic if $calc is provided
    $result: #{$result} apply-calculation($combined-value, $calc);
  }

  @return $result;
}

@function apply-calculation($value, $calc) {
  @if $calc != null {
    @return calc(#{$value} #{$calc});
  } @else {
    @return $value;
  }
}

@mixin responsive-styles($property, $names, $exclude: null, $calc: null, $additional-variable: null) {
  $variable-names: ();

  @if meta.type-of($names) == 'string' {
    $variable-names: (string.slice($names, 1, -1));
  } @else {
    $variable-names: $names;
  }

  & {
    #{$property}: #{construct-variables($variable-names, mobile, $calc, $additional-variable)};
  }

  @if $exclude != 'tablet' {
    @media (min-width: map.get($breakpoints, sm)) {
      #{$property}: #{construct-variables($variable-names, tablet, $calc, $additional-variable)};
    }
  }

  @if $exclude != 'desktop' {
    @media (min-width: map.get($breakpoints, lg)) {
      #{$property}: #{construct-variables($variable-names, desktop, $calc, $additional-variable)};
    }
  }
}

@mixin print-grayscale {
  @media print {
    filter: grayscale(1);
  }
}

@mixin visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
  border: 0 !important;
}

@mixin table-cell-selector($selector: 'all') {
  @if $selector == 'thead' or $selector == 'all' {
    & > thead > tr > th {
      @content;
    }
  }

  @if $selector == 'tbody' or $selector == 'all' {
    & > tbody > tr > td {
      @content;
    }
  }

  @if $selector == 'tfoot' or $selector == 'all' {
    & > tfoot > tr > th {
      @content;
    }
  }
}

@mixin focus-element {
  border-radius: 0.25rem;
  outline: 2px solid var(--global-outline-color, var(--color-primary-main));
  outline-offset: var(--global-outline-offset, 1px);

  html:not([data-whatintent='keyboard']) & {
    outline: none;
  }
}

@mixin button-reset {
  padding: 0;
  font: inherit;
  color: inherit;
  text-decoration: none;
  cursor: pointer;
  background-color: var(--color-transparent);
  border: none;

  &:disabled {
    cursor: default;
  }
}
